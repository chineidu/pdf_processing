config:
  api_config:
    title: PDF Processing API
    name: "${.title}"
    description: A robust API for processing PDF documents, extracting text, and performing OCR operations.
    version: v1.0.0
    status: healthy
    prefix: /api/v1
    auth_prefix: "${.prefix}/auth"
    middleware:
      cors:
        allow_origins:
          - "*"
        allow_credentials: true
        allow_methods:
          - "*"
        allow_headers:
          - "*"

  database_config:
    pool_size: 30
    max_overflow: 10 # Allow N extra connections
    pool_timeout: 20 # Wait N seconds for connection
    pool_recycle: 1800 # Recycle connections after 30 minutes
    pool_pre_ping: true # Test connections before use
    echo: false
    expire_on_commit: false # False for async implementations

  pdf_processing_config:
    max_num_pages: 20
    max_file_size_bytes: 10485760 # 10*1024*1024 # 10MB
    perform_ocr: false
    use_gpu: true

  endpoint_policies_config:
    ratelimits:
      {
        "guest":
          {
            "requests_per_minute": 10,
            "max_concurrent_requests": 1,
            "special_endpoints":
              {
                "/predict/ner": { "limit": 2, "period": 60 },
                "/predict/sentiment": { "limit": 5, "period": 60 },
              },
          },
        "free":
          {
            "requests_per_minute": 60,
            "max_concurrent_requests": 5,
            "special_endpoints":
              {
                "/predict/ner": { "limit": 5, "period": 60 },
                "/predict/sentiment": { "limit": 10, "period": 60 },
              },
          },
        "plus":
          {
            "requests_per_minute": 200,
            "max_concurrent_requests": 10,
            "special_endpoints":
              {
                "/predict/ner": { "limit": 20, "period": 60 },
                "/predict/sentiment": { "limit": 100, "period": 60 },
              },
          },
        "pro":
          {
            "requests_per_minute": 1000,
            "max_concurrent_requests": 50,
            "special_endpoints":
              {
                "/predict/ner": { "limit": 100, "period": 60 },
                "/predict/sentiment": { "limit": 500, "period": 60 },
              },
          },
      }
    credit_costs:
      "/predict/ner": 2.0
      "/predict/sentiment": 1.5
      "/detect-anomaly": 3.0
      "/cluster": 2.5
      "/recommend": 4.0
